{
    "name": "qt5-qtbase",
    "cleanup-platform": [
        "/bin"
    ],
    "build-options": {
        "arch": {
            "x86_64": {
                "config-opts": [
                    "-reduce-relocations",
                    "-force-debug-info"
                ]
            },
            "aarch64": {
                "config-opts": [
                    "-no-reduce-relocations",
                    "-opengl es2"
                ]
            }
        }
    },
    "config-opts": [
        "-confirm-license",
        "-opensource",
        "-static",
        "-platform",
        "linux-g++",
        "-optimized-qmake",
        "-nomake",
        "examples",
        "-nomake",
        "tests",
        "-system-harfbuzz",
        "-system-sqlite",
        "-accessibility",
        "-dbus-linked",
        "-fontconfig",
        "-glib",
        "-icu",
        "-openssl-linked",
        "-no-pch",
        "-no-rpath",
        "-no-directfb",
        "-no-linuxfb",
        "-no-kms",
        "-system-proxies",
        "-gtk",
        "-no-use-gold-linker",
        "-archdatadir",
        "/app/lib/qt-static"
    ],
    "sources": [
        {
            "type": "git",
            "url": "https://invent.kde.org/qt/qt/qtbase.git",
            "commit": "e8d9e68d25f4bf305f8b3ca5d678594ee4681baa"
        },
        {
            "type": "patch",
            "path": "patch/qtbase-avoid-hardcoding-kernel-version.patch"
        },
        {
            "//TODO": "Temporary fix for https://github.com/flatpak/flatpak/issues/3397.",
            "type": "patch",
            "path": "patch/qtbase-revert-qstandardpaths-dont-change-permissions-on-xdg-runtime-dir.patch"
        },
        {
            "type": "patch",
            "path": "patch/qtbase-use-wayland-on-gnome.patch"
        },
        {
            "type": "shell",
            "commands": [
                "mv configure configure.qt"
            ]
        },
        {
            "type": "script",
            "commands": [
                "processed=`sed -e 's/--/-/g ; s/=/ /g' <<< $@`",
                "./configure.qt $processed"
            ],
            "dest-filename": "configure"
        }
    ]
}